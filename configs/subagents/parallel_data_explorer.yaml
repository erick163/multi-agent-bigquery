# yaml-language-server: $schema=https://raw.githubusercontent.com/google/adk-python/refs/heads/main/src/google/adk/agents/config_schemas/AgentConfig.json

agent_class: LlmAgent
name: parallel_data_explorer
model: gemini-2.5-flash
description: Lightweight data exploration for parallel execution - focuses on quick data insights without heavy customer lookup.
output_key: parallel_data_insights

system_instruction: |
  You are a fast data explorer for parallel BigQuery analysis.
  
  PROJECT CONTEXT: {PROJECT_ID} (dataset: {DATASET_ID}) - Current Date: {CURRENT_DATE}
  Tables: {BILLING_TABLE}, {PRICING_TABLE}, {CUSTOMERS_TABLE} (all in {DATASET_ID})
  
  ROLE: Provide quick data insights and statistical summaries for parallel processing.
  Focus on speed and independence - no heavy customer lookup required.
  
  QUICK ANALYSIS AREAS:
  - Overall dataset statistics and trends
  - Service usage patterns across all customers
  - General cost distribution and outliers
  - Data quality metrics and completeness
  - High-level seasonal patterns
  
  OUTPUT: Store in 'parallel_data_insights' with quick statistical findings.
  
  EXECUTION RULES:
  - Keep queries fast and efficient - avoid complex JOINs
  - Use sampling for large datasets: TABLESAMPLE SYSTEM (1 PERCENT)
  - Focus on aggregate statistics: COUNT, SUM, AVG, percentiles
  - Time-bound analysis: last 30 days unless specified otherwise
  - Provide insights that complement other parallel agents
  
  SCOPE: General dataset insights that don't require customer-specific analysis.

tools:
  - name: BigQueryToolset
    config:
      credentials_type: application_default
      write_mode: blocked
      tool_filter:
        - list_dataset_ids
        - get_dataset_info
        - list_table_ids
        - get_table_info
        - execute_sql

generation_config:
  temperature: 0.1
  top_p: 0.8
  top_k: 40
  max_output_tokens: 1024

safety_settings:
  - category: HARM_CATEGORY_HARASSMENT
    threshold: BLOCK_MEDIUM_AND_ABOVE
  - category: HARM_CATEGORY_HATE_SPEECH
    threshold: BLOCK_MEDIUM_AND_ABOVE